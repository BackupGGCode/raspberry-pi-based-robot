__whitespace={" ":true,"\t":true,"\n":true,"\f":true,"\r":true};difflib={defaultJunkFunction:function(a){return a in __whitespace},stripLinebreaks:function(a){return a.replace(/^[\n\r]*|[\n\r]*$/g,"")},stringAsLines:function(f){var a=f.indexOf("\n");var e=f.indexOf("\r");var d=((a>-1&&e>-1)||e<0)?"\n":"\r";var b=f.split(d);for(var c=0;c<b.length;c++){b[c]=difflib.stripLinebreaks(b[c])}return b},__reduce:function(c,e,b){if(b!=null){var d=b;var a=0}else{if(e){var d=e[0];var a=1}else{return null}}for(;a<e.length;a++){d=c(d,e[a])}return d},__ntuplecomp:function(d,c){var e=Math.max(d.length,c.length);for(var f=0;f<e;f++){if(d[f]<c[f]){return -1}if(d[f]>c[f]){return 1}}return d.length==c.length?0:(d.length<c.length?-1:1)},__calculate_ratio:function(b,a){return a?2*b/a:1},__isindict:function(a){return function(b){return b in a}},__dictget:function(c,b,a){return b in c?c[b]:a},SequenceMatcher:function(e,c,d){this.set_seqs=function(g,f){this.set_seq1(g);this.set_seq2(f)};this.set_seq1=function(b){if(b==this.a){return}this.a=b;this.matching_blocks=this.opcodes=null};this.set_seq2=function(a){if(a==this.b){return}this.b=a;this.matching_blocks=this.opcodes=this.fullbcount=null;this.__chain_b()};this.__chain_b=function(){var o=this.b;var g=o.length;var h=this.b2j={};var j={};for(var m=0;m<o.length;m++){var l=o[m];if(l in h){var p=h[l];if(g>=200&&p.length*100>g){j[l]=1;delete h[l]}else{p.push(m)}}else{h[l]=[m]}}for(var l in j){delete h[l]}var f=this.isjunk;var a={};if(f){for(var l in j){if(f(l)){a[l]=1;delete j[l]}}for(var l in h){if(f(l)){a[l]=1;delete h[l]}}}this.isbjunk=difflib.__isindict(a);this.isbpopular=difflib.__isindict(j)};this.find_longest_match=function(g,w,q,n){var y=this.a;var x=this.b;var z=this.b2j;var f=this.isbjunk;var o=g;var m=q;var l=0;var t=null;var s={};var p=[];for(var u=g;u<w;u++){var h={};var r=difflib.__dictget(z,y[u],p);for(var v in r){t=r[v];if(t<q){continue}if(t>=n){break}h[t]=k=difflib.__dictget(s,t-1,0)+1;if(k>l){o=u-k+1;m=t-k+1;l=k}}s=h}while(o>g&&m>q&&!f(x[m-1])&&y[o-1]==x[m-1]){o--;m--;l++}while(o+l<w&&m+l<n&&!f(x[m+l])&&y[o+l]==x[m+l]){l++}while(o>g&&m>q&&f(x[m-1])&&y[o-1]==x[m-1]){o--;m--;l++}while(o+l<w&&m+l<n&&f(x[m+l])&&y[o+l]==x[m+l]){l++}return[o,m,l]};this.get_matching_blocks=function(){if(this.matching_blocks!=null){return this.matching_blocks}var f=this.a.length;var b=this.b.length;var q=[[0,f,0,b]];var l=[];var s,m,v,r,a,p,n,h,t;while(q.length){a=q.pop();s=a[0];m=a[1];v=a[2];r=a[3];t=this.find_longest_match(s,m,v,r);p=t[0];n=t[1];h=t[2];if(h){l.push(t);if(s<p&&v<n){q.push([s,p,v,n])}if(p+h<m&&n+h<r){q.push([p+h,m,n+h,r])}}}l.sort(difflib.__ntuplecomp);var g=j1=k1=block=0;var o=[];for(var u in l){block=l[u];i2=block[0];j2=block[1];k2=block[2];if(g+k1==i2&&j1+k1==j2){k1+=k2}else{if(k1){o.push([g,j1,k1])}g=i2;j1=j2;k1=k2}}if(k1){o.push([g,j1,k1])}o.push([f,b,0]);this.matching_blocks=o;return this.matching_blocks};this.get_opcodes=function(){if(this.opcodes!=null){return this.opcodes}var h=0;var g=0;var n=[];this.opcodes=n;var f,l,b,o,p;var a=this.get_matching_blocks();for(var m in a){f=a[m];l=f[0];b=f[1];o=f[2];p="";if(h<l&&g<b){p="replace"}else{if(h<l){p="delete"}else{if(g<b){p="insert"}}}if(p){n.push([p,h,l,g,b])}h=l+o;g=b+o;if(o){n.push(["equal",l,h,b,g])}}return n};this.get_grouped_opcodes=function(g){if(!g){g=3}var a=this.get_opcodes();if(!a){a=[["equal",0,1,0,1]]}var b,q,j,h,p,o;if(a[0][0]=="equal"){b=a[0];q=b[0];j=b[1];h=b[2];p=b[3];o=b[4];a[0]=[q,Math.max(j,h-g),h,Math.max(p,o-g),o]}if(a[a.length-1][0]=="equal"){b=a[a.length-1];q=b[0];j=b[1];h=b[2];p=b[3];o=b[4];a[a.length-1]=[q,j,Math.min(h,j+g),p,Math.min(o,p+g)]}var m=g+g;var f=[];for(var l in a){b=a[l];q=b[0];j=b[1];h=b[2];p=b[3];o=b[4];if(q=="equal"&&h-j>m){f.push([q,j,Math.min(h,j+g),p,Math.min(o,p+g)]);j=Math.max(j,h-g);p=Math.max(p,o-g)}f.push([q,j,h,p,o])}if(f&&f[f.length-1][0]=="equal"){f.pop()}return f};this.ratio=function(){matches=difflib.__reduce(function(a,b){return a+b[b.length-1]},this.get_matching_blocks(),0);return difflib.__calculate_ratio(matches,this.a.length+this.b.length)};this.quick_ratio=function(){var a,b;if(this.fullbcount==null){this.fullbcount=a={};for(var g=0;g<this.b.length;g++){b=this.b[g];a[b]=difflib.__dictget(a,b,0)+1}}a=this.fullbcount;var j={};var f=difflib.__isindict(j);var h=numb=0;for(var g=0;g<this.a.length;g++){b=this.a[g];if(f(b)){numb=j[b]}else{numb=difflib.__dictget(a,b,0)}j[b]=numb-1;if(numb>0){h++}}return difflib.__calculate_ratio(h,this.a.length+this.b.length)};this.real_quick_ratio=function(){var b=this.a.length;var a=this.b.length;return _calculate_ratio(Math.min(b,a),b+a)};this.isjunk=d?d:difflib.defaultJunkFunction;this.a=this.b=null;this.set_seqs(e,c)}};diffview={buildView:function(B){var t=B.baseTextLines;var e=B.newTextLines;var m=B.opcodes;var h=B.baseTextName?B.baseTextName:"Base Text";var u=B.newTextName?B.newTextName:"New Text";var p=B.contextSize;var d=(B.viewType==0||B.viewType==1)?B.viewType:0;if(t==null){throw"Cannot build diff view; baseTextLines is not defined."}if(e==null){throw"Cannot build diff view; newTextLines is not defined."}if(!m){throw"Canno build diff view; opcodes is not defined."}function D(n,b){var F=document.createElement(n);F.className=b;return F}function o(b,F){var n=document.createElement(b);n.appendChild(document.createTextNode(F));return n}function q(n,b,G){var F=document.createElement(n);F.className=b;F.appendChild(document.createTextNode(G));return F}var r=document.createElement("thead");var x=document.createElement("tr");r.appendChild(x);if(d){x.appendChild(document.createElement("th"));x.appendChild(document.createElement("th"));x.appendChild(q("th","texttitle",h+" vs. "+u))}else{x.appendChild(document.createElement("th"));x.appendChild(q("th","texttitle",h));x.appendChild(document.createElement("th"));x.appendChild(q("th","texttitle",u))}r=[r];var l=[];var a;function c(G,b,F,n,H){if(b<F){G.appendChild(o("th",(b+1).toString()));G.appendChild(q("td",H,n[b].replace(/\t/g,"\u00a0\u00a0\u00a0\u00a0")));return b+1}else{G.appendChild(document.createElement("th"));G.appendChild(D("td","empty"));return b}}function A(G,b,F,n,H){G.appendChild(o("th",b==null?"":(b+1).toString()));G.appendChild(o("th",F==null?"":(F+1).toString()));G.appendChild(q("td",H,n[b!=null?b:F].replace(/\t/g,"\u00a0\u00a0\u00a0\u00a0")))}for(var s=0;s<m.length;s++){code=m[s];change=code[0];var C=code[1];var f=code[2];var v=code[3];var j=code[4];var E=Math.max(f-C,j-v);var w=[];var z=[];for(var y=0;y<E;y++){if(p&&m.length>1&&((s>0&&y==p)||(s==0&&y==0))&&change=="equal"){var g=E-((s==0?1:2)*p);if(g>1){w.push(x=document.createElement("tr"));C+=g;v+=g;y+=g-1;x.appendChild(o("th","..."));if(!d){x.appendChild(q("td","skip",""))}x.appendChild(o("th","..."));x.appendChild(q("td","skip",""));if(s+1==m.length){break}else{continue}}}w.push(x=document.createElement("tr"));if(d){if(change=="insert"){A(x,null,v++,e,change)}else{if(change=="replace"){z.push(a=document.createElement("tr"));if(C<f){A(x,C++,null,t,"delete")}if(v<j){A(a,null,v++,e,"insert")}}else{if(change=="delete"){A(x,C++,null,t,change)}else{A(x,C++,v++,t,change)}}}}else{C=c(x,C,f,t,change);v=c(x,v,j,e,change)}}for(var y=0;y<w.length;y++){l.push(w[y])}for(var y=0;y<z.length;y++){l.push(z[y])}}r.push(x=document.createElement("tbody"));for(var s in l){if(s>=0){x.appendChild(l[s])}}x=D("table","diff"+(d?" inlinediff":""));for(var s in r){if(s>=0){x.appendChild(r[s])}}return x}};function check(b,a){document.getElementById(a).value=b;if(a=="rev1_id"){disable_radio(b)}}function disable_radio(c){var d=document.getElementsByName("rad_revision2");for(i=d.length-1;i>=0;i--){var b=new Number(d[i].value);if(b.valueOf()<=c.valueOf()){d[i].disabled=true;d[i].style.visibility="hidden"}else{d[i].disabled=false;d[i].style.visibility="visible"}if(b.valueOf()==c.valueOf()){rad_flag=false;rev2_val=document.getElementById("rev2_id");if(rev2_val.value<b.valueOf()){d[i].checked=true;rev2_val.value=d[i].value}}}}function htmlDecodeIE(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#40;/g,"(").replace(/&#41;/g,")")}var createWikiDialog;$(document).ready(function(){var a=function(){var b=$("#wiki_new_page_entry");if(b.val()==""){alert("Please enter a name for the new wiki page.");return}var d={str:b.val()};var c={data:d,type:"POST",url:get_url_title_url,success:function(l,m){var j=window.location.pathname.split("/");var f="";for(var h=0;h<j.length;h++){var e=j[h];if(e!="wiki"){f+=e+"/"}else{f+="wiki/";break}}var g=f+l+"/edit";window.location=g}};jQuery.ajax(c)};$(".wiki-create-page").bind("click",function(h){h.preventDefault();var f=$(window).scrollTop();if(typeof createWikiDialog!="undefined"){createWikiDialog.dialog("open");window.scrollTo(0,f);$("#wiki_new_page_entry").focus()}else{var g=jQuery('<div><form><input id="wiki_new_page_entry" type="text"></form></div>');var d=$(this).position();if(typeof jQuery.browser.msie!="undefined"){var c=0;var b=80}else{var c=200;var b=100}g.appendTo(document.body);g.dialog({title:"Create new wiki page (0-9, A-Z), use _ instead of space",position:"center",resizable:false,zIndex:100,modal:true,dialogClass:"create-wiki-page",buttons:{Close:function(){$(this).dialog("close")},"Create page":a}});window.scrollTo(0,f);createWikiDialog=g;$("#wiki_new_page_entry").focus();$("#wiki_new_page_entry").parent("form").bind("submit",function(j){j.preventDefault();a()})}});$("#topscrollwrapper").scroll(function(){$("#diffoutput").scrollLeft($("#topscrollwrapper").scrollLeft())});if($.browser.mozilla){$("#diffoutput").mouseup(function(){var b=$("#diffoutput").scrollLeft();$("#topscrollwrapper").scrollLeft(b)})}else{$("#diffoutput").scroll(function(){var b=$("#diffoutput").scrollLeft();$("#topscrollwrapper").scrollLeft(b)})}$("#diffit").click(function(){var b=document.getElementById("rev1_id").value;var c=document.getElementById("rev2_id").value;$.post(path_site_index+"?ACT="+aid_extended_wiki_tags_revision_data,{rev1_id:b,rev2_id:c},function(e){if(e.status=="success"){var d=difflib.stringAsLines(e.revision1);var h=difflib.stringAsLines(e.revision2);var l=new difflib.SequenceMatcher(d,h);var f=l.get_opcodes();var g=document.getElementById("diffoutput");while(g.firstChild){g.removeChild(g.firstChild)}var j=null;g.appendChild(diffview.buildView({baseTextLines:d,newTextLines:h,opcodes:f,baseTextName:"Base Text",newTextName:"New Text",contextSize:j,viewType:document.getElementById("inline").checked?1:0}));$("#topscrolldiv").width($(".diff").width())}else{}})});$("#diffnote").click(function(){var b=document.getElementById("rev1_id").value;var c=document.getElementById("rev2_id").value;$.post(path_site_index+"?ACT="+aid_doc_note_revisions,{note_reva:b,note_revb:c},function(e){if(e.status=="success"){if($.browser.msie){var d=difflib.stringAsLines(htmlDecodeIE(e.revision1));var h=difflib.stringAsLines(htmlDecodeIE(e.revision2))}else{var d=difflib.stringAsLines($("<div/>").html(e.revision1).text());var h=difflib.stringAsLines($("<div/>").html(e.revision2).text())}var l=new difflib.SequenceMatcher(d,h);var f=l.get_opcodes();var g=document.getElementById("diffoutput");while(g.firstChild){g.removeChild(g.firstChild)}var j=null;g.appendChild(diffview.buildView({baseTextLines:d,newTextLines:h,opcodes:f,baseTextName:"Base Text",newTextName:"New Text",contextSize:j,viewType:document.getElementById("inline").checked?1:0}));$("#topscrolldiv").width($(".diff").width())}else{alert("Error")}})})});